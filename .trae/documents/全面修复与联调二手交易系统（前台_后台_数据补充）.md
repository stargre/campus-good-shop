## 删除与精简

* 删除/隐藏前台“我的积分”和“推送控制”：

  * 移除入口与路由：`web/src/views/index/user/score-view.vue`、`web/src/views/index/user/push-view.vue`，对应菜单与路由表的项。

  * 去除相关导航按钮与跳转（用户中心、侧栏、顶部菜单）。

## 前台功能修复

* 地址模块（显示与新增）：

  * 适配字段映射：前端当前提交 `name/mobile/desc/default`，后端 `Address` 需要 `receiver_name/receiver_phone/receiver_address/is_default`。

  * 在 `server/myapp/views/index/address.py` 的 `create/update/list` 增加参数映射层，兼容现有前端字段；列表默认按 `is_default` 优先。

* 订单列表显示为空：

  * 统一用后端的 `TOKEN` 判定当前用户，不再依赖前端传 `userId`；`web/src/api/index/order.ts` 的 `getOrderList` 移除 `userId` 参数。

  * 后端 `server/myapp/views/index/order.py:list_api` 保持基于 token 的买家订单查询。

* 我的商品显示为空：

  * 前端 `web/src/views/index/user/product-list.vue` 的我的商品接口调用改为不传 `userId`，由后端 token 确认；

  * 后端 `server/myapp/views/index/product.py:myList` 保持基于 token 查询并分页返回。

* 新增商品按钮与流程：

  * 在用户中心与列表页添加“发布商品”按钮（跳转 `product-publish.vue`）；确保路由可见；

  * 前端 `product-publish.vue` 提交字段与后端 `create` 映射一致（`product_title/product_price/product_o_price/category_id/content/images`）。

* 首页分类筛选与标签：

  * 在 `web/src/views/index/index.vue` 和 `product-list.vue`：为每个卡片显示 `category_name` 标签；点击触发 `GET /index/product/list?category_id=...`；

  * 顶部分类导航调用 `GET /index/category/list` 并高亮当前分类。

* 首页仅显示未售出 + 切换已售出：

  * 默认调用 `GET /index/product/list?status=1`；页面添加“显示已售出”的切换开关，再调用 `status=3`。

## 商品详情增强

* 评论：

  * 在 `web/src/views/index/detail.vue` 增加评论列表区域（`GET /index/comment/list?productId=...`）；

  * 新增评论表单（`POST /index/comment/create`），提交 `content` 与 `product`；

  * 删除评论按钮：仅当 `comment.user_id == userStore.user_id` 显示；调用 `POST /index/comment/delete?ids=<comment_id>`。

* 购物车与收藏：

  * 加入购物车按钮：`POST /index/cart/add`（传 `product_id`）；

  * 加入收藏按钮：`POST /index/favorite/add`（传 `product_id`）；若已收藏，后端返回重复错误码，前端提示“已收藏”。

## 后端接口修复与一致性

* 地址接口：`server/myapp/views/index/address.py`

  * `create/update`：兼容前端字段映射；`list_api` 支持按 `user_id`（token）返回，排序默认 `is_default` 在前。

* 商品接口：`server/myapp/views/index/product.py`

  * 已修复：分类筛选用 `category` 外键；浏览记录写 `create_time`；图片字段 `image_url/sort_order`；价格单位“元”一致。

  * 新增：`list` 支持 `status` 参数默认 `1`；

* 订单接口：`server/myapp/views/index/order.py`

  * 列表/创建/取消/支付/确认收货：参数命名统一（如 `order_id`），价格单位“元”。

* 评论接口：`server/myapp/views/index/comment.py`

  * 补充删除鉴权（仅允许删除本人评论）与单个 `commentId` 支持（同时保留原批量 `ids`）。

## 后台管理修复

* 商品管理：`server/myapp/views/admin/product.py` + `web/src/views/admin/product.vue`

  * 新增与编辑表单校验与提交字段一致；列表-编辑-删除链路打通。

* 订单管理：`server/myapp/views/admin/order.py` + `web/src/views/admin/order.vue`

  * 支持变更 `order_status`（0/1/2/3/4/5）与时间字段；

* 评论管理：`server/myapp/views/admin/comment.py` + `web/src/views/admin/comment.vue`

  * 显示现有评论，支持新增模拟评论（选择商品/用户/评分/内容）。

* 用户管理：`server/myapp/views/admin/user.py` + `web/src/views/admin/user.vue`

  * 列表显示、搜索与分页；新增用户表单提交字段映射为后端。

* 通知公告：`server/myapp/views/admin/notice.py` + `web/src/views/admin/notice.vue`

  * 列表显示；新增表单校验（避免“输入为空”提示），字段为 `notice_content/sort_value`。

* 日志管理：`server/myapp/views/admin/loginLog.py/opLog.py/errorLog.py` + `web/src/views/admin/*.vue`

  * 列表展示、分页；

## 数据补充与 insert\_data.sql 更新

* 增加未售出商品数据（至少 10 条，覆盖各分类），`product_status=1`，`is_reserved=0`，`view_count/wish_count/collect_count` 合理分布；

* 补充浏览记录（`record`）、登录日志（`b_login`）、操作日志（`b_op`）、错误日志（`b_error`）各 10-20 条；

* 为首页标签筛选准备每类至少 3 条商品；

* 为后台评论与公告测试加入 5-10 条评论与 3 条公告；

* 保持 `NOW(6)` 与外键一致性，插入顺序遵循外键依赖。

## 联调与测试清单

* 前台：

  * 登录/注册 → 地址新增/默认地址显示；

  * 首页分类筛选与未售出切换；详情评论（新增/删除本人）；加入购物车/收藏；我的商品与发布商品；订单创建/取消/支付/确认收货。

* 后台：

  * 商品新增/编辑/删除；订单状态更新；评论列表/新增；用户列表显示与新增；公告列表与新增（校验通过）；登录/操作/错误日志列表显示。

* 验证接口与前端一致：统一 `order_id`、`product_id`、地址字段映射；所有请求均附带 `TOKEN/ADMINTOKEN`。

## 交付

* 完整代码修复与前后端联调；

* 更新后的 `insert_data.sql`，增加未售出商品与日志数据；

* 自测报告（步骤与结果）；如需我继续在你的机器上保持服务运行，我可提供预览链接并演示所有流程。

还有环境的问题，之前说了，前端在conda activate test里面\
后端在conda activate py38里面
