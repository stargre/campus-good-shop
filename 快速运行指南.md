# Python Food é¡¹ç›®å¿«é€Ÿè¿è¡ŒæŒ‡å—

## ä¸€ã€è¿è¡Œæ­¥éª¤æ€»ç»“

æ ¹æ® `server/readme.md` å’Œ `è¿è¡ŒæŒ‡å—.md`ï¼Œä»¥ä¸‹æ˜¯å®Œæ•´çš„è¿è¡Œæ­¥éª¤ï¼š

### åç«¯è¿è¡Œæ­¥éª¤ï¼ˆ7æ­¥ï¼‰

1. **å®‰è£…MySQLæ•°æ®åº“å¹¶å¯åŠ¨æœåŠ¡**
2. **åˆ›å»ºæ•°æ®åº“**
   ```sql
   CREATE DATABASE IF NOT EXISTS python_food DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
   ```
3. **å¯¼å…¥SQLæ•°æ®**
   ```sql
   USE python_food;
   SOURCE D:/github/LocalResposity/Campus/python_food/python_food.sql;
   ```
   ï¼ˆè¯·å°†è·¯å¾„æ›¿æ¢ä¸ºå®é™…çš„SQLæ–‡ä»¶è·¯å¾„ï¼‰
4. **ä¿®æ”¹æ•°æ®åº“é…ç½®**
   - ç¼–è¾‘ `server/server/settings.py`
   - ä¿®æ”¹æ•°æ®åº“ç”¨æˆ·åã€å¯†ç ç­‰ä¿¡æ¯
5. **å®‰è£…Pythonä¾èµ–**
   ```bash
   cd server
   pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple
   ```
6. **ç¡®ä¿uploadç›®å½•å­˜åœ¨**ï¼ˆå·²å­˜åœ¨ï¼Œæ— éœ€åˆ›å»ºï¼‰
7. **è¿è¡ŒDjangoé¡¹ç›®**
   ```bash
   python manage.py runserver 0.0.0.0:8000
   ```

### å‰ç«¯è¿è¡Œæ­¥éª¤ï¼ˆ3æ­¥ï¼‰

1. **å®‰è£…Node.jsä¾èµ–**
   ```bash
   cd web
   npm install
   ```
2. **é…ç½®APIåœ°å€**ï¼ˆå·²è‡ªåŠ¨é…ç½®ä¸ºæœ¬åœ°åœ°å€ï¼‰
   - ç¼–è¾‘ `web/src/store/constants.ts`
   - å·²è®¾ç½®ä¸ºï¼š`http://127.0.0.1:8000`
3. **è¿è¡Œå‰ç«¯é¡¹ç›®**
   ```bash
   npm run dev
   ```

---

## äºŒã€å¿…é¡»é…ç½®é¡¹æ£€æŸ¥æ¸…å•

### âœ… å·²è‡ªåŠ¨ä¿®å¤çš„é…ç½®

1. âœ… **PyMySQLåˆå§‹åŒ–** - `server/server/__init__.py` å·²é…ç½®
2. âœ… **åå°è§†å›¾æ¨¡å—å¯¼å…¥** - `server/myapp/views/admin/__init__.py` å·²ä¿®å¤
3. âœ… **å‰ç«¯APIåœ°å€** - `web/src/store/constants.ts` å·²æ”¹ä¸ºæœ¬åœ°åœ°å€

### âš ï¸ éœ€è¦æ‰‹åŠ¨é…ç½®çš„é¡¹

#### 1. æ•°æ®åº“é…ç½®ï¼ˆå¿…é¡»ï¼‰

ç¼–è¾‘ `server/server/settings.py`ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'python_food',  # æ•°æ®åº“å
        'USER': 'root',  # âš ï¸ ä¿®æ”¹ä¸ºä½ çš„MySQLç”¨æˆ·å
        'PASSWORD': '4643830',  # âš ï¸ ä¿®æ”¹ä¸ºä½ çš„MySQLå¯†ç 
        'HOST': '127.0.0.1',  # æ•°æ®åº“ä¸»æœº
        'PORT': '3306',  # æ•°æ®åº“ç«¯å£
        'OPTIONS': {
            "init_command": "SET foreign_key_checks = 0;",
        }
    }
}
```

#### 2. æ•°æ®åº“åˆ›å»ºå’Œå¯¼å…¥ï¼ˆå¿…é¡»ï¼‰

```sql
-- 1. åˆ›å»ºæ•°æ®åº“
CREATE DATABASE IF NOT EXISTS python_food DEFAULT CHARSET utf8 COLLATE utf8_general_ci;

-- 2. ä½¿ç”¨æ•°æ®åº“
USE python_food;

-- 3. å¯¼å…¥SQLæ–‡ä»¶ï¼ˆå°†è·¯å¾„æ›¿æ¢ä¸ºå®é™…è·¯å¾„ï¼‰
SOURCE D:/github/LocalResposity/Campus/python_food/python_food.sql;
```

æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œï¼š
```bash
mysql -u root -p python_food < python_food.sql
```

---

## ä¸‰ã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`django.db.utils.OperationalError: (2003, "Can't connect to MySQL server")`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
2. æ£€æŸ¥ `settings.py` ä¸­çš„æ•°æ®åº“é…ç½®æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤æ•°æ®åº“ `python_food` å·²åˆ›å»º

### é—®é¢˜2ï¼šPyMySQLæ¨¡å—é—®é¢˜

**é”™è¯¯ä¿¡æ¯**ï¼š`ModuleNotFoundError: No module named 'pymysql'`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
pip install PyMySQL
```

**æ³¨æ„**ï¼š`server/server/__init__.py` å·²é…ç½®PyMySQLåˆå§‹åŒ–ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

### é—®é¢˜3ï¼šæ•°æ®åº“è¡¨ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯**ï¼š`django.db.utils.ProgrammingError: Table 'python_food.xxx' doesn't exist`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿å·²å¯¼å…¥SQLæ–‡ä»¶
2. æˆ–è¿è¡Œæ•°æ®åº“è¿ç§»ï¼š
   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```

### é—®é¢˜4ï¼šåå°ç®¡ç†è§†å›¾å¯¼å…¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`ModuleNotFoundError: No module named 'myapp.views.admin.xxx'`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å·²ä¿®å¤ï¼š`server/myapp/views/admin/__init__.py` å·²æ›´æ–°ä¸ºæ­£ç¡®çš„å¯¼å…¥æ–¹å¼

### é—®é¢˜5ï¼šå‰ç«¯APIè¯·æ±‚å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼šè·¨åŸŸé”™è¯¯æˆ–404é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆ`http://127.0.0.1:8000`ï¼‰
2. æ£€æŸ¥ `web/src/store/constants.ts` ä¸­çš„ `BASE_URL` é…ç½®
3. å·²è‡ªåŠ¨é…ç½®ä¸ºï¼š`http://127.0.0.1:8000/myapp`

### é—®é¢˜6ï¼šä¸Šä¼ ç›®å½•æƒé™é—®é¢˜

**é”™è¯¯ä¿¡æ¯**ï¼šæ–‡ä»¶ä¸Šä¼ å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- `server/upload` ç›®å½•å·²å­˜åœ¨
- ç¡®ä¿WebæœåŠ¡å™¨æœ‰å†™å…¥æƒé™
- Windowsï¼šå³é”®æ–‡ä»¶å¤¹ â†’ å±æ€§ â†’ å®‰å…¨ â†’ æ·»åŠ å†™å…¥æƒé™

---

## å››ã€éªŒè¯è¿è¡ŒçŠ¶æ€

### åç«¯éªŒè¯

1. **è®¿é—®Djangoç®¡ç†åå°**
   ```
   http://127.0.0.1:8000/admin/
   ```

2. **æµ‹è¯•APIæ¥å£**
   ```
   http://127.0.0.1:8000/myapp/index/classification/list
   ```
   åº”è¯¥è¿”å›åˆ†ç±»åˆ—è¡¨çš„JSONæ•°æ®

### å‰ç«¯éªŒè¯

1. **è®¿é—®å‰ç«¯é¡µé¢**
   ```
   http://localhost:5173
   ```
   ï¼ˆé»˜è®¤Viteç«¯å£ä¸º5173ï¼‰

2. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**
   - æ— é”™è¯¯ä¿¡æ¯
   - APIè¯·æ±‚æ­£å¸¸

---

## äº”ã€å¿«é€Ÿå¯åŠ¨å‘½ä»¤

### åç«¯å¯åŠ¨

```bash
# 1. è¿›å…¥serverç›®å½•
cd server

# 2. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple

# 3. å¯åŠ¨æœåŠ¡
python manage.py runserver 0.0.0.0:8000
```

### å‰ç«¯å¯åŠ¨

```bash
# 1. è¿›å…¥webç›®å½•
cd web

# 2. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

## å…­ã€é…ç½®æ–‡ä»¶æ¸…å•

éœ€è¦æ£€æŸ¥/ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ï¼š

1. âœ… `server/server/settings.py` - æ•°æ®åº“é…ç½®ï¼ˆ**å¿…é¡»ä¿®æ”¹**ï¼‰
2. âœ… `server/server/__init__.py` - PyMySQLåˆå§‹åŒ–ï¼ˆå·²é…ç½®ï¼‰
3. âœ… `server/myapp/views/admin/__init__.py` - åå°è§†å›¾å¯¼å…¥ï¼ˆå·²ä¿®å¤ï¼‰
4. âœ… `web/src/store/constants.ts` - APIåœ°å€é…ç½®ï¼ˆå·²é…ç½®ä¸ºæœ¬åœ°ï¼‰

---

## ä¸ƒã€ä¸‹ä¸€æ­¥æ“ä½œ

1. **ä¿®æ”¹æ•°æ®åº“é…ç½®**
   - ç¼–è¾‘ `server/server/settings.py`
   - ä¿®æ”¹æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 

2. **åˆ›å»ºå¹¶å¯¼å…¥æ•°æ®åº“**
   - åˆ›å»º `python_food` æ•°æ®åº“
   - å¯¼å…¥ `python_food.sql` æ–‡ä»¶

3. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   cd server
   python manage.py runserver 0.0.0.0:8000
   ```

4. **å¯åŠ¨å‰ç«¯æœåŠ¡**ï¼ˆå¯é€‰ï¼‰
   ```bash
   cd web
   npm install
   npm run dev
   ```

5. **è®¿é—®ç³»ç»Ÿ**
   - åç«¯APIï¼šhttp://127.0.0.1:8000/myapp/
   - å‰ç«¯é¡µé¢ï¼šhttp://localhost:5173

---

## å…«ã€æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
- `server/readme.md` - åç«¯éƒ¨ç½²è¯´æ˜
- `è¿è¡ŒæŒ‡å—.md` - è¯¦ç»†è¿è¡ŒæŒ‡å—
- `é¡¹ç›®æ¶æ„æ–‡æ¡£.md` - é¡¹ç›®æ¶æ„è¯´æ˜

ç¥è¿è¡Œé¡ºåˆ©ï¼ğŸ‰


